<?xml version="1.0"?>
<record-definition prefix="abm">
    <namespaces>
        <namespace prefix="dc" uri="http://purl.org/dc/elements/1.1/"
                   schema="http://dublincore.org/schemas/xmls/qdc/dc.xsd"/>
        <namespace prefix="dcterms" uri="http://purl.org/dc/terms/"
                   schema="http://dublincore.org/schemas/xmls/qdc/dcterms.xsd"/>
        <namespace prefix="europeana" uri="http://www.europeana.eu/schemas/ese/"
                   schema="http://www.europeana.eu/schemas/ese/ESE-V3.3.xsd"/>
        <namespace prefix="ese" uri="http://www.europeana.eu/schemas/ese/"
                   schema="http://www.europeana.eu/schemas/ese/ESE-V3.3.xsd"/>
        <namespace prefix="abm" uri="http://abmu.org/abm" schema="http://abmu.org/abm.xsd"/>
    </namespaces>
    <root localName="record">
        <!-- fulldoc default true -->
        <field prefix="abm" localName="municipality" fieldType="text"/>
        <field prefix="abm" localName="aboutPerson"/>
        <field prefix="abm" localName="county"/>
        <field prefix="abm" localName="namedPlace"/>
        <field prefix="abm" localName="landedProperty"/>
        <field prefix="abm" localName="contentProvider"/>
        <field prefix="abm" localName="addresss"/>
        <field prefix="abm" localName="digitised"/>


        <field prefix="dc" localName="contributor"/>
        <field prefix="dc" localName="coverage"/>
        <field prefix="dc" localName="creator"/>
        <field prefix="dc" localName="date"/>
        <!--removed extract year it doesn't belong here -->
        <field prefix="dc" localName="description" summaryField="DESCRIPTION"/>
        <field prefix="dc" localName="format"/>
        <field prefix="dc" localName="identifier"/>
        <field prefix="dc" localName="language"/>
        <field prefix="dc" localName="publisher"/>
        <field prefix="dc" localName="relation"/>
        <field prefix="dc" localName="rights"/>
        <field prefix="dc" localName="source"/>
        <field prefix="dc" localName="subject"/>
        <field prefix="dc" localName="title" summaryField="TITLE"/>
        <field prefix="dc" localName="type"/>
        <field prefix="dcterms" localName="alternative"/>
        <field prefix="dcterms" localName="conformsTo"/>
        <field prefix="dcterms" localName="created"/>
        <field prefix="dcterms" localName="extent"/>
        <field prefix="dcterms" localName="hasFormat"/>
        <field prefix="dcterms" localName="hasPart"/>
        <field prefix="dcterms" localName="hasVersion"/>
        <field prefix="dcterms" localName="isFormatOf"/>
        <field prefix="dcterms" localName="isPartOf"/>
        <field prefix="dcterms" localName="isReferencedBy"/>
        <field prefix="dcterms" localName="isReplacedBy"/>
        <field prefix="dcterms" localName="isRequiredBy"/>
        <field prefix="dcterms" localName="isVersionOf"/>
        <field prefix="dcterms" localName="issued"/>
        <field prefix="dcterms" localName="medium"/>
        <field prefix="dcterms" localName="provenance"/>
        <field prefix="dcterms" localName="references"/>
        <field prefix="dcterms" localName="rightsHolder"/>
        <field prefix="dcterms" localName="replaces"/>
        <field prefix="dcterms" localName="requires"/>
        <field prefix="dcterms" localName="spatial"/>
        <field prefix="dcterms" localName="tableOfContents"/>
        <field prefix="dcterms" localName="temporal"/>
        <field prefix="europeana" localName="collectionName" factName="spec"/>
        <field prefix="europeana" localName="collectionTitle" factName="name"/>
        <field prefix="europeana" localName="country" factName="country"/>
        <field prefix="europeana" localName="dataProvider" factName="dataProvider" summaryField="OWNER"/>
        <field prefix="europeana" localName="isShownAt" fieldType="string"/>
        <field prefix="europeana" localName="isShownBy" fieldType="string" summaryField="THUMBNAIL"/>
        <field prefix="europeana" localName="language" fieldType="string" factName="language"/>
        <field prefix="europeana" localName="object"/>
        <field prefix="europeana" localName="provider" factName="provider"/>
        <field prefix="europeana" localName="rights" factName="rights"/>
        <field prefix="europeana" localName="source"/>
        <!-- to be deleted is unused -->
        <field prefix="europeana" localName="type" fieldType="string" factName="type"/>
        <field prefix="europeana" localName="unstored" fieldType="text"/>
        <field prefix="europeana" localName="uri" identifierField="true">
            <converter call=".toId(spec)"/>
        </field>
        <field prefix="europeana" localName="userTag"/>
        <field prefix="europeana" localName="hasDigitalObject"/>
        <field prefix="europeana" localName="year" fieldType="string">
            <converter multipleOutput="true" call=".extractYear()"/>
        </field>
    </root>
    <views>
        <view name="full">
            <view-field name="dc_title" prefix="dc" localName="title"/>
            <view-field name="dc_date">
                <field-ref prefix="dc" localName="date"/>
                <field-ref prefix="dcterms" localName="created"/>
                <field-ref prefix="dcterms" localName="issued"/>
            </view-field>
            <view-field name="dc_creator" prefix="dc" localName="creator"/>
            <view-field name="dc_description" prefix="dc" localName="description"/>
            <view-field name="dc_language" prefix="dc" localName="language"/>
            <view-field name="dc_format">
                <field-ref prefix="dc" localName="format"/>
                <field-ref prefix="dcterms" localName="extent"/>
                <field-ref prefix="dcterms" localName="medium"/>
            </view-field>
            <view-field name="dc_source" prefix="dc" localName="source"/>
            <view-field name="dc_rights" prefix="dc" localName="rights"/>
            <view-field name="dc_publisher" prefix="dc" localName="publisher"/>
            <view-field name="europeana_provider" prefix="abm" localName="contentProvider"/>
            <view-field name="dc_subject">
                <field-ref prefix="dc" localName="subject"/>
                <field-ref prefix="dcterms" localName="spatial"/>
                <field-ref prefix="dcterms" localName="coverage"/>
            </view-field>
            <view-field name="dcterms_temporal" prefix="dcterms" localName="temporal"/>
            <view-field name="dcterms_provenance" prefix="dcterms" localName="provenance"/>
            <view-field name="dc_type" prefix="dc" localName="type"/>
            <view-field name="dc_identifier" prefix="dc" localName="identifier"/>
            <view-field name="dc_relation">
                <field-ref prefix="dc" localName="relation"/>
                <field-ref prefix="dcterms" localName="references"/>
                <field-ref prefix="dcterms" localName="isReferencedBy"/>
                <field-ref prefix="dcterms" localName="isReplacedBy"/>
                <field-ref prefix="dcterms" localName="isRequiredBy"/>
                <field-ref prefix="dcterms" localName="isPartOf"/>
                <field-ref prefix="dcterms" localName="hasPart"/>
                <field-ref prefix="dcterms" localName="replaces"/>
                <field-ref prefix="dcterms" localName="requires"/>
                <field-ref prefix="dcterms" localName="isVersionOf"/>
                <field-ref prefix="dcterms" localName="hasVersion"/>
                <field-ref prefix="dcterms" localName="conformsTo"/>
                <field-ref prefix="dcterms" localName="hasFormat"/>
            </view-field>
        </view>
    </views>
    <validation>
        assert record.'europeana:collectionTitle'
        assert record.'europeana:country'
        assert record.'europeana:dataProvider'
        assert record.'europeana:provider'
        assert record.'europeana:language'
        assert record.'europeana:rights'
        assert record.'europeana:type'
        assert record.'europeana:uri'
        assert record.'europeana:isShownAt' || record.'europeana:isShownBy'
    </validation>
</record-definition>