#{extends "organization/crudHeader.html" /}


<div class="row">
    <div class="span6">
        <form id="form" method="POST" action="" class="form-delving form-horizontal well well-small">
            <div class="error" style="margin-bottom: 12px;" data-bind="text: errors().global"></div>
            #{doLayout /}
        </form>
    </div>
</div>

<div class="well">
    #{btnButton label: messages.get('ui.label.save'), extraClass:"btn-success btn-large span6 pull-right", iconClass:"icon-ok-circle icon-white", id:"saveButton", type:"submit" /}
    #{btnButton label: messages.get('ui.label.cancel'), extraClass:"cancelButton", id:"cancelButton", type:"reset" /}
    #{btnButton label: messages.get('ui.label.reset'), extraClass:"", type:"reset" /}
    <div class="wait"></div>
</div>


<script type="text/javascript">

    $(document).ready(function () {
        var viewModel = {};

        load(${data.raw()}, viewModel, document.getElementById('form'), function () {
            $("table.files td.delete button").addClass("btn btn-danger");
            $("body").css('visibility', 'visible');
        });

        $('#saveButton').click(function (event) {
            event.preventDefault();
            handleSubmit('${baseUrl}/submit', viewModel, '#form', null, function () {
                document.location = '${baseUrl}';
            });
        });
    });
</script>