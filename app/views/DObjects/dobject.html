#{extends viewUtils.themeProperty('themeLayout') /}

#{set title: viewUtils.getKey('thing.object') + ' ' + dobject.name + ' - ' + viewUtils.getKey('thing.owner') + ': ' + browsedFullName /}

#{set bodyId:'object-view' /}

#{breadcrumbs /}

<h1 class="sep">${dobject.name}</h1>

<div class="row">
    <div class="grid_12">
        <div class="dashboard">
            <div class="media record">
                <img src='/thumbnail/${dobject._id}/350' width="350" alt="${dobject.name}" class="img"/>

                <div class="extra">
                    <a href="#" class="overlay-trigger" rel="#overlay" title="&{'ui.label.enlargeImage'}">&{'ui.label.enlargeImage'}</a>
                </div>
                <div class="bd">
                    #{thingToolbar owner: dobject.userName, id: dobject._id, authUser: userName, type:"object", labels:userLabels, places: userPlaces/}
                    <div class="metadata">
                        <h5>&{'thing.description'}:</h5>

                        <p>${views.context.package.niceText(dobject.description.isEmpty() ? "No description available" : dobject.description)}</p>
                        <hr/>
                        <div class="row">
                            <div class="g-1of2 alpha">
                                #{metadataField label: viewUtils.getKey('thing.name'), data: dobject.name /}
                                #{metadataField label: viewUtils.getKey('thing.owner'), data: dobject.userName, link: '/'+dobject.userName /}
                            </div>

                            <div class="g-1of2 omega">
                                #{metadataField label: viewUtils.getKey('thing.datecreated'), data: views.context.package.niceTime(dobject._id.getTime()) /}
                                #{displayLabels labels: labelsList, places: placesList /}
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- overlayed element -->
<div id="overlay" class="result-overlay" style="padding: 20px;width:auto">
    <div class="contentWrap">
        <img src="${dobject.getSourceFileUrl()}" alt="${dobject.name}" style="max-width:900px"/>

        <div class="title">${dobject.name}</div>
    </div>
</div>
<script type="text/javascript" language="javascript">
    $(function () {
        $("a.overlay-trigger").overlay({
            closeOnClick: true,
            mask: {
                color: "#ddddd0",
                loadSpeed: 200,
                opacity: 0.5
            }
        });
    });
</script>

