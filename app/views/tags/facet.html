#{list _facetMap, as: 'facet'}

#{if facet.getLinks().length() > 0 }

#{if facet.getType() == _type}
<h4 class="trigger #{if facet.isFacetSelected()}active#{/if}">
    #{if _typeKey}
        ${_typeKey}
    #{/if}
    #{else}
        ${_type}
    #{/else}
</h4>

<div class="facet-container">
    #{list facet.getLinks(), as: 'link'}
    %{def qs = '/search?query='+ _qString + link.url}%
     <div class="#{if _columns == 2}g-1of2 #{/if}">
        #{if !link.remove()}
        <input type="checkbox" value="${qs}"/><a href="${qs}">${link.value()}</a> (${link.count()})
        #{/if}
        #{else}
        <input type="checkbox" checked="checked" value="${qs}"/><a href="${qs}">${link.value()}</a> (${link.count()})
        #{/else}
    </div>
    #{/list}
</div>
#{/if}

#{/if}
#{/list}




