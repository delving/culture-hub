#{extends viewUtils.themeProperty('themeLayout') /}
#{set title:'Upload an image' /}

<script id='jquery-fileupload-ui' src="@{'/public/common/javascripts/upload.js'}" type='text/javascript'></script>

<div id="fileupload" class="grid_16">
  <form action="@{ImageUpload.uploadFile()}" method="POST" enctype="multipart/form-data">
    #{authenticityToken /}
    <div class="fileupload-buttonbar">
      <label class="fileinput-button">
        <span>Add files...</span>
        <input type="file" name="files[]" multiple="true"/>
      </label>
      <button type="submit" class="start">Start upload</button>
      <button type="reset" class="cancel">Cancel upload</button>
      <button type="button" class="delete">Delete files</button>
    </div>
  </form>
  <div class="fileupload-content">
    <table class="files"></table>
    <div class="fileupload-progressbar"></div>
  </div>
</div>
<script type="text/javascript">
  $(document).ready(function() {
    initUploadWidget();
    $('#fileupload').fileupload({
      acceptFileTypes: /(\.|\/)(gif|jpe?g|png|tiff?|jp2)$/i
    });
  });
</script>