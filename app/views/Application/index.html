#{extends viewUtils.themeProperty('themeLayout') /}
#{set title: viewUtils.getKey('ui.label.welcome') /}
#{set bodyId:'home' /}
#{set 'moreCss'}

#{/set}

#{set 'moreScripts'}
<script src='${views.context.package.themePath("javascripts/index.js")}' type='text/javascript'></script>
#{/set}

<div class="messages-container row">
    <div class="messages">
        #{if flash.registrationSuccess}
        <p class="success">
            ${viewUtils.getKey("ui.message.registration.success", flash.registrationSuccess)}
        </p>
        #{/}
        #{if flash.registrationError}
        <p class="error">
            ${viewUtils.getKey("ui.message.registration.error", flash.registrationError)}
        </p>
        #{/}
        #{if flash.activation && flash.activation == "true"}
        <p class="success">
            ${viewUtils.getKey("ui.message.activation.success")}
        </p>
        #{/}
        #{if flash.activation && flash.activation == "false"}
        <p class="error">
            ${viewUtils.getKey("ui.message.activation.error")}
        </p>
        #{/}
        #{if flash.resetPasswordEmail && flash.resetPasswordEmail == "true"}
        <p class="success">
            ${viewUtils.getKey("ui.message.resetpassword.email.success")}
        </p>
        #{/}
        #{if flash.resetPasswordError}
        <p class="error">
            ${viewUtils.getKey("ui.message.resetpassword.error", flash.resetPasswordError)}
        </p>
        #{/}
        #{if flash.resetPasswordSuccess && flash.resetPasswordSuccess == "true"}
        <p class="success">
            ${viewUtils.getKey("ui.message.resetpassword.success")}
        </p>
        #{/}
    </div>
</div>


<div class="row">
    #{if recentObjects.size() > 0}
    <div class="g-4of12">
        <div class="mod recent object">
            <div class="inner">
					<div class="hd section">
						<h3>${recentObjects.size() == 1 ? viewUtils.getKey('home.recentobject') : viewUtils.getKey('home.recentobjects')}</h3>
					</div>
					<div class="bd">
                        #{list recentObjects, as: 'o'}
                        <div class="media">
                            <a href="/${o.userName}/object/${o.id}" class="clip"><img src='${views.context.package.thumbnailUrl(o.thumbnail, 100)}' width="100" class="img" alt="${o.title}"/></a>

                            <div class="bd">
                                <div class="metadata">
                                    <span class="title"><a href="/${o.userName}/object/${o.id}" title="${o.title}">${o.title.shorten(50)}</a></span>
                                    <p>${o.description.shorten(80)}</p>
                                </div>
                            </div>
                        </div>
                        #{/list}
                    </div>
            </div>
        </div>
    </div>
    #{/if}

    #{if recentCollections.size() > 0}
     <div class="g-4of12">
        <div class="mod recent collection">
            <div class="inner">
					<div class="hd section">
						<h3>${recentCollections.size() == 1 ? viewUtils.getKey('home.recentcollection') : viewUtils.getKey('home.recentcollections')}</h3>
					</div>
					<div class="bd">
                        #{list recentCollections, as: 'c'}
                        <div class="media">
                            <a href="/${c.userName}/collection/${c.id}" class="clip"><img src='${views.context.package.thumbnailUrl(c.thumbnail, 100)}' width="100" class="img" alt="${c.title}"/></a>

                            <div class="bd">
                                <div class="metadata">
                                    <span class="title"><a href="/${c.userName}/collection/${c.id}" title="${c.title}">${c.title.shorten(50)}</a></span>
                                    <p>${c.description.shorten(80)}</p>
                                </div>
                            </div>
                        </div>
                        #{/list}
                    </div>
            </div>
        </div>
    </div>
    #{/if}

    #{if recentStories.size() > 0}
    <div class="g-4of12">
        <div class="mod recent story">
            <div class="inner">
					<div class="hd section">
						<h3>${recentStories.size() == 1 ? viewUtils.getKey('home.recentstory') : viewUtils.getKey('home.recentstories')}</h3>
					</div>
					<div class="bd">
                        #{list recentStories, as: 's'}
                        <div class="media">
                            <a href="/${s.userName}/story/${s.id}" class="clip"><img src='${views.context.package.thumbnailUrl(s.thumbnail, 100)}' class="img" width="100" alt="${s.title}"/></a>

                            <div class="bd">
                                <div class="metadata">
                                    <span class="title"><a href="/${s.userName}/story/${s.id}" title="${s.title}">${s.title.shorten(50)}</a></span>
                                    <p>${s.description.shorten(100)}</p>
                                </div>
                            </div>
                        </div>
                        #{/list}
                    </div>
            </div>
        </div>
    </div>
    #{/if}
</div>








